<!doctype html>
<html lang="ja" class="no-js">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>スクロール・フェードイン デモ</title>
  <!-- JS有効時だけ初期非表示を適用するため、先に .js クラスを付与 -->
  <script>document.documentElement.classList.replace('no-js','js');</script>
  <style>
    /* ベース */
    :root{
      --maxw: 1100px;
      --space: clamp(16px, 3vw, 28px);
      --space-lg: clamp(32px, 6vw, 72px);
    }
    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Sans", "Noto Sans JP", sans-serif;
      line-height:1.8;
      color:#222;
      background:#f7f9fb;
    }
    header, main, footer{ display:block; }
    .container{ max-width: var(--maxw); margin-inline:auto; padding-inline: var(--space); }

    /* ヒーロー */
    .hero{
      padding: var(--space-lg) 0;
      text-align:center;
      background: radial-gradient(80% 80% at 50% 0%, #eaf3ff 0%, #f7f9fb 60%, transparent 100%);
    }
    .hero h1{
      margin:0 0 12px;
      font-size: clamp(28px, 6vw, 48px);
      letter-spacing:.02em;
    }
    .hero p{ margin:0 auto; max-width: 60ch; color:#555; }

    /* セクション */
    section{ padding: var(--space-lg) 0; background:#fff; }
    section + section{ border-top: 1px solid #eef1f5; }

    /* カードグリッド */
    .grid{
      display:grid;
      gap: var(--space);
      grid-template-columns: repeat(3, 1fr);
    }
    @media (max-width: 900px){ .grid{ grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background: #ffffff;
      border: 1px solid #e6ebf2;
      border-radius: 14px;
      padding: var(--space);
      box-shadow: 0 6px 18px rgba(0,0,0,.04);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: 0 10px 26px rgba(0,0,0,.06);
    }
    .card h3{ margin: 0 0 8px; font-size: clamp(18px, 2.5vw, 22px); }
    .card p{ margin:0; color:#555; }

    /* ボタン */
    .btn{
      display:inline-block;
      margin-top: 12px;
      padding: .6rem 1rem;
      border-radius: 999px;
      text-decoration: none;
      border: 1px solid #cfe0ff;
      background: #e9f1ff;
      color: #1a4dff;
      font-weight: 600;
      transition: transform .15s ease, background .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); background:#dfeaff; }

    /* ===== スクロール時フェードイン =====
       - JS有効時のみ初期状態を非表示にする（.js .fadein）
       - reduce-motion 環境ではアニメーションをオフ
    */
    .fadein{ will-change: opacity, transform; }
    .js .fadein{
      opacity: 0;
      transform: translateY(22px);
      transition:
        opacity .6s ease,
        transform .6s ease;
    }
    .js .fadein.show{
      opacity: 1;
      transform: translateY(0);
    }
    /* 遅延用のバリエーション（任意でクラスを追加） */
    .delay-1 { transition-delay: .12s; }
    .delay-2 { transition-delay: .24s; }
    .delay-3 { transition-delay: .36s; }

    /* 動きに弱い利用者への配慮 */
    @media (prefers-reduced-motion: reduce){
      .js .fadein{ transition: none !important; transform: none !important; opacity: 1 !important; }
      .card, .btn{ transition: none !important; }
    }

    footer{
      text-align:center;
      color:#666;
      padding: var(--space-lg) 0;
      background:#fbfcfe;
      font-size:.95rem;
    }
  </style>
</head>
<body>
  <header class="hero">
    <div class="container">
      <h1>スクロールで “ふわっ” と出るサイト</h1>
      <p>IntersectionObserver を使った軽量なフェードイン。外部ライブラリ不要・1ファイル完結です。</p>
      <a href="#features" class="btn">特徴を見る</a>
    </div>
  </header>

  <main>
    <section id="features" class="container">
      <h2 class="fadein">特徴</h2>
      <div class="grid">
        <article class="card fadein delay-1" aria-label="軽量実装">
          <h3>軽量実装</h3>
          <p>JSは数十行、CSSも最小限。パフォーマンスに優れます。</p>
        </article>
        <article class="card fadein delay-2" aria-label="アクセシビリティ配慮">
          <h3>アクセシビリティ配慮</h3>
          <p><code>prefers-reduced-motion</code> に従い、必要に応じて動きを抑制します。</p>
        </article>
        <article class="card fadein delay-3" aria-label="レスポンシブ対応">
          <h3>レスポンシブ対応</h3>
          <p>スマホでは1列、タブレットは2列、PCは3列に自動調整。</p>
        </article>
      </div>
    </section>

    <section class="container">
      <h2 class="fadein">もう少し長いコンテンツ</h2>
      <p class="fadein delay-1">この段落や下のカードにも <code>fadein</code> クラスを付けるだけでアニメーション対象になります。</p>
      <div class="grid" style="margin-top: var(--space);">
        <article class="card fadein"><h3>カードA</h3><p>任意の内容。</p></article>
        <article class="card fadein delay-1"><h3>カードB</h3><p>任意の内容。</p></article>
        <article class="card fadein delay-2"><h3>カードC</h3><p>任意の内容。</p></article>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 My Site</p>
  </footer>

  <noscript>
    <!-- JSが無効でも内容が読めるように -->
    <style>.fadein{opacity:1 !important; transform:none !important}</style>
  </noscript>

  <script>
    // ===== フェードイン（IntersectionObserver） =====
    const options = { root: null, rootMargin: "0px 0px -10% 0px", threshold: 0.1 };
    const io = new IntersectionObserver((entries, observer) => {
      for (const e of entries) {
        if (e.isIntersecting) {
          e.target.classList.add('show');
          observer.unobserve(e.target); // 1度表示したら監視解除（無駄な処理を減らす）
        }
      }
    }, options);

    document.querySelectorAll('.fadein').forEach(el => io.observe(el));
  </script>
</body>
</html>
